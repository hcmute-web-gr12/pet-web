"use strict";var l=(t,n,e)=>new Promise((o,s)=>{var a=i=>{try{r(e.next(i))}catch(c){s(c)}},f=i=>{try{r(e.throw(i))}catch(c){s(c)}},r=i=>i.done?o(i.value):Promise.resolve(i.value).then(a,f);r((e=e.apply(t,n)).next())});var g=()=>{let t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg"),e=document.createElementNS(t,"circle"),o=document.createElementNS(t,"path");return n.classList.add("animate-spin","h-4","w-4","mr-2","text-stone-100"),n.setAttribute("fill","none"),n.setAttribute("viewBox","0 0 24 24"),e.classList.add("opacity-25"),e.setAttribute("cx","12"),e.setAttribute("cy","12"),e.setAttribute("r","10"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","4"),o.classList.add("opacity-75"),o.setAttribute("d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),o.setAttribute("fill","currentColor"),n.append(e,o),n};var d=t=>{let n=g();return t.prepend(n),console.log(n,t),()=>{n.remove()}};var m=!1;function y(t){return l(this,null,function*(){if(t.preventDefault(),m)return;m=!0;let n=document.getElementById("pet-dialog");if(n instanceof HTMLDialogElement){let e=document.getElementById("pet-add-submit"),o=d(e),s=yield fetch(this.action,{method:"post",body:new FormData(this)});if(o(),m=!1,s.status===200){h(),n.close();return}let a=document.getElementById("pet-form-error");a&&(a.innerHTML=yield s.text())}})}function L(){let t=document.getElementById("pet-dialog");t instanceof HTMLDialogElement&&t.showModal()}function b(){let t=document.getElementById("pet-dialog");t instanceof HTMLDialogElement&&t.close()}function h(){return l(this,null,function*(){var e,o;let t=document.getElementById("pet-table");if(!(t instanceof HTMLTableElement))return;t.classList.add("animate-pulse");let n=yield fetch("/api/admin/pet").then(s=>s.text());(e=t.querySelector("tbody"))==null||e.remove(),(o=t.querySelector("tfoot"))==null||o.remove(),t.innerHTML+=DOMPurify.sanitize(n),setTimeout(()=>{t.classList.remove("animate-pulse")},300)})}var u;(u=document.getElementById("pet-form"))==null||u.addEventListener("submit",y);var p;(p=document.getElementById("pet-add"))==null||p.addEventListener("pointerdown",L);var E;(E=document.getElementById("pet-form-back"))==null||E.addEventListener("pointerdown",b);
